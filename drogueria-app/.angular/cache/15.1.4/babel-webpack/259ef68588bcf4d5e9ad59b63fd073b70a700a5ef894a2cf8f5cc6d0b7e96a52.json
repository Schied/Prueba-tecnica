{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/medicamento.service\";\nimport * as i2 from \"src/app/services/venta.service\";\nimport * as i3 from \"primeng/api\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"primeng/messages\";\nimport * as i8 from \"primeng/button\";\nimport * as i9 from \"primeng/dialog\";\nimport * as i10 from \"primeng/inputtext\";\nimport * as i11 from \"primeng/toast\";\nfunction MedicamentoComponent_ng_template_7_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(col_r7.header);\n  }\n}\nfunction MedicamentoComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, MedicamentoComponent_ng_template_7_th_1_Template, 2, 1, \"th\", 22);\n    i0.ɵɵelementStart(2, \"th\", 23);\n    i0.ɵɵtext(3, \"Opciones\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const columns_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", columns_r5);\n  }\n}\nfunction MedicamentoComponent_ng_template_8_td_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\");\n  }\n}\nfunction MedicamentoComponent_ng_template_8_td_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n    i0.ɵɵpipe(1, \"date\");\n  }\n  if (rf & 2) {\n    const col_r11 = i0.ɵɵnextContext().$implicit;\n    const medicamento_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(1, 1, medicamento_r8[col_r11.fields], \"dd/MM/yyyy\"));\n  }\n}\nfunction MedicamentoComponent_ng_template_8_td_1_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n  if (rf & 2) {\n    const col_r11 = i0.ɵɵnextContext().$implicit;\n    const medicamento_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵtextInterpolate(medicamento_r8[col_r11.fields]);\n  }\n}\nfunction MedicamentoComponent_ng_template_8_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtemplate(1, MedicamentoComponent_ng_template_8_td_1_span_1_Template, 1, 0, \"span\", 28);\n    i0.ɵɵtemplate(2, MedicamentoComponent_ng_template_8_td_1_ng_template_2_Template, 2, 4, \"ng-template\", null, 29, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(4, MedicamentoComponent_ng_template_8_td_1_ng_template_4_Template, 1, 1, \"ng-template\", null, 30, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r11 = ctx.$implicit;\n    const _r13 = i0.ɵɵreference(3);\n    const _r15 = i0.ɵɵreference(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", col_r11.fields === \"fecha_fabricacion\" || col_r11.fields === \"fecha_vencimiento\")(\"ngIfThen\", _r13)(\"ngIfElse\", _r15);\n  }\n}\nfunction MedicamentoComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, MedicamentoComponent_ng_template_8_td_1_Template, 6, 3, \"td\", 24);\n    i0.ɵɵelementStart(2, \"td\")(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function MedicamentoComponent_ng_template_8_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const medicamento_r8 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.venderMedicamento(medicamento_r8.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function MedicamentoComponent_ng_template_8_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const medicamento_r8 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.editarMedicamento(medicamento_r8.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function MedicamentoComponent_ng_template_8_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const medicamento_r8 = restoredCtx.$implicit;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.eliminarMedicamento(medicamento_r8.id));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const columns_r9 = ctx.columns;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", columns_r9);\n  }\n}\nfunction MedicamentoComponent_ng_template_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function MedicamentoComponent_ng_template_40_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.RegistrarMed());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.frmMedicamento.invalid);\n  }\n}\nfunction MedicamentoComponent_ng_template_72_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function MedicamentoComponent_ng_template_72_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r27.ModificarMed());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r3.frmMMedicamento.invalid);\n  }\n}\nfunction MedicamentoComponent_ng_template_81_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function MedicamentoComponent_ng_template_81_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.VenderMed());\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"550px\"\n  };\n};\nexport class MedicamentoComponent {\n  constructor(medicamentoService, ventaService, messageService, formBuilder) {\n    this.medicamentoService = medicamentoService;\n    this.ventaService = ventaService;\n    this.messageService = messageService;\n    this.formBuilder = formBuilder;\n    this.medicamentos = [];\n    this.cols = [];\n    this.msgs = [];\n    this.modalMed = false;\n    this.modalMMed = false;\n    this.modalVenta = false;\n    this.precio = 0;\n    this.medicamento = {\n      id: null,\n      nombre: null,\n      fecha_fabricacion: null,\n      fecha_vencimiento: null,\n      stock: null,\n      valor: null\n    };\n    this.venta = {\n      fecha: null,\n      hora: null,\n      medicamento: null,\n      cantidad: null,\n      valor_unitario: null,\n      valor_total: null\n    };\n  }\n  ngOnInit() {\n    this.getMedicamentos();\n    this.cols = [{\n      fields: \"id\",\n      header: \"Id\"\n    }, {\n      fields: \"nombre\",\n      header: \"Nombre\"\n    }, {\n      fields: \"laboratorio\",\n      header: \"Laboratorio\"\n    }, {\n      fields: \"fecha_fabricacion\",\n      header: \"Fecha de fabricacion\"\n    }, {\n      fields: \"fecha_vencimiento\",\n      header: \"Fecha de vencimiento\"\n    }, {\n      fields: \"stock\",\n      header: \"Cantidad\"\n    }, {\n      fields: \"valor\",\n      header: \"Valor Unitario\"\n    }];\n    this.frmMedicamento = this.formBuilder.group({\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      laboratorio: ['', [Validators.required, Validators.minLength(3)]],\n      fecha_fabricacion: ['', [Validators.required]],\n      fecha_vencimiento: ['', [Validators.required]],\n      stock: ['', [Validators.required, Validators.min(1)]],\n      valor: ['', [Validators.required, Validators.min(100)]]\n    });\n    this.frmMMedicamento = this.formBuilder.group({\n      id: ['', [Validators.required]],\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      laboratorio: ['', [Validators.required, Validators.minLength(3)]],\n      fecha_fabricacion: ['', [Validators.required]],\n      fecha_vencimiento: ['', [Validators.required]],\n      stock: ['', [Validators.required, Validators.min(1)]],\n      valor: ['', [Validators.required, Validators.min(100)]]\n    });\n  }\n  getMedicamentos() {\n    this.medicamentoService.getMedicamentos().subscribe(result => {\n      let meds = [];\n      for (const element of result) {\n        element.fecha_fabricacion = this.formDate(element.fecha_fabricacion);\n        element.fecha_vencimiento = this.formDate(element.fecha_vencimiento);\n        meds.push(element);\n      }\n      this.medicamentos = meds;\n    }, error => {\n      console.log(error);\n    });\n  }\n  showModalMed() {\n    this.modalMed = true;\n  }\n  RegistrarMed() {\n    let form = {\n      nombre: this.frmMedicamento.controls['nombre'].value,\n      laboratorio: this.frmMedicamento.controls['laboratorio'].value,\n      fecha_fabricacion: new Date(`${this.frmMedicamento.controls['fecha_fabricacion'].value}T00:00:00`),\n      fecha_vencimiento: new Date(`${this.frmMedicamento.controls['fecha_vencimiento'].value}T00:00:00`),\n      stock: this.frmMedicamento.controls['stock'].value,\n      valor: this.frmMedicamento.controls['valor'].value\n    };\n    this.medicamentoService.save(form).subscribe(res => {\n      if (res) {\n        this.modalMed = false;\n        this.frmMedicamento.reset();\n        this.getMedicamentos();\n      }\n    });\n  }\n  editarMedicamento(medId) {\n    let med = this.medicamentos.find(ele => ele.id == medId);\n    this.frmMMedicamento = this.formBuilder.group({\n      id: [med.id, [Validators.required]],\n      nombre: [med.nombre, [Validators.required, Validators.minLength(3)]],\n      laboratorio: [med.laboratorio, [Validators.required, Validators.minLength(3)]],\n      fecha_fabricacion: [med.fecha_fabricacion, [Validators.required]],\n      fecha_vencimiento: [med.fecha_vencimiento, [Validators.required]],\n      stock: [med.stock, [Validators.required, Validators.min(1)]],\n      valor: [med.valor, [Validators.required, Validators.min(100)]]\n    });\n    console.log(med);\n    this.modalMMed = true;\n  }\n  venderMedicamento(medId) {\n    this.medVenta = this.medicamentos.find(ele => ele.id == medId);\n    this.precio = this.medVenta.valor;\n    this.modalVenta = true;\n  }\n  ModificarMed() {\n    let form = {\n      id: this.frmMMedicamento.controls['id'].value,\n      nombre: this.frmMMedicamento.controls['nombre'].value,\n      laboratorio: this.frmMMedicamento.controls['laboratorio'].value,\n      fecha_fabricacion: new Date(`${this.frmMMedicamento.controls['fecha_fabricacion'].value}T00:00:00`),\n      fecha_vencimiento: new Date(`${this.frmMMedicamento.controls['fecha_vencimiento'].value}T00:00:00`),\n      stock: this.frmMMedicamento.controls['stock'].value,\n      valor: this.frmMMedicamento.controls['valor'].value\n    };\n    this.medicamentoService.update(form).subscribe(res => {\n      console.log(res);\n      if (res) {\n        this.modalMMed = false;\n        this.getMedicamentos();\n      }\n    });\n  }\n  eliminarMedicamento(medId) {\n    console.log(medId);\n    this.medicamentoService.delete(medId).subscribe(res => {\n      this.getMedicamentos();\n    });\n  }\n  VenderMed() {\n    if (this.venta.cantidad <= this.medVenta.stock && this.venta.cantidad > 0) {\n      this.medVenta.stock -= this.venta.cantidad;\n      this.medVenta.fecha_fabricacion = new Date(`${this.medVenta.fecha_fabricacion}T00:00:00`);\n      this.medVenta.fecha_vencimiento = new Date(`${this.medVenta.fecha_vencimiento}T00:00:00`);\n      this.medicamentoService.update(this.medVenta).subscribe(res => {\n        if (res) {\n          this.getMedicamentos();\n        }\n      });\n      let fecha = new Date();\n      this.venta.fecha = fecha;\n      this.venta.hora = fecha.getHours() + \":\" + (fecha.getMinutes().toString().length == 1 ? `0${fecha.getMinutes()}` : fecha.getMinutes());\n      this.venta.medicamento = this.medVenta.nombre;\n      this.venta.valor_unitario = this.medVenta.valor;\n      this.venta.valor_total = this.medVenta.valor * this.venta.cantidad;\n      this.ventaService.save(this.venta).subscribe(res => {\n        if (res) {\n          this.venta.cantidad = 0;\n          this.modalVenta = false;\n          this.messageService.add({\n            severity: 'success',\n            summary: 'Exito!',\n            detail: 'Se ha realizado la venta'\n          });\n        }\n      });\n    } else {\n      if (this.venta.cantidad < 1) {\n        this.msgs = [{\n          severity: 'info',\n          summary: 'Info',\n          detail: 'Cantidad invalida'\n        }];\n      } else {\n        this.msgs = [{\n          severity: 'error',\n          summary: 'Error',\n          detail: 'Stock insuficiente'\n        }];\n      }\n    }\n  }\n  formDate(date) {\n    let fecha = new Date(date),\n      month = '' + (fecha.getMonth() + 1),\n      day = '' + fecha.getDate(),\n      year = fecha.getFullYear();\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    return [year, month, day].join('-');\n  }\n}\nMedicamentoComponent.ɵfac = function MedicamentoComponent_Factory(t) {\n  return new (t || MedicamentoComponent)(i0.ɵɵdirectiveInject(i1.MedicamentoService), i0.ɵɵdirectiveInject(i2.VentaService), i0.ɵɵdirectiveInject(i3.MessageService), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\nMedicamentoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MedicamentoComponent,\n  selectors: [[\"app-medicamento\"]],\n  decls: 82,\n  vars: 27,\n  consts: [[\"pButton\", \"\", \"type\", \"button\", \"label\", \"Registrar nuevo\", 1, \"p-button-primary\", 3, \"click\"], [3, \"value\", \"columns\", \"paginator\", \"rows\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"header\", \"Registrar nuevo\", \"styleClass\", \"p-fluid\", 3, \"responsive\", \"visible\", \"modal\", \"visibleChange\"], [1, \"login-container\", 3, \"formGroup\", \"submit\"], [\"for\", \"float-input\"], [\"id\", \"nombre\", \"type\", \"text\", \"name\", \"nombre\", \"formControlName\", \"nombre\", \"pInputText\", \"\"], [\"id\", \"laboratorio\", \"type\", \"text\", \"name\", \"laboratorio\", \"formControlName\", \"laboratorio\", \"pInputText\", \"\"], [\"id\", \"fecha_fabricacion\", \"type\", \"date\", \"name\", \"fecha_fabricacion\", \"formControlName\", \"fecha_fabricacion\", \"pInputText\", \"\"], [\"for\", \"fecha_vencimiento\"], [\"id\", \"fecha_vencimiento\", \"type\", \"date\", \"name\", \"fecha_vencimiento\", \"formControlName\", \"fecha_vencimiento\", \"pInputText\", \"\"], [\"for\", \"stock\"], [\"id\", \"stock\", \"type\", \"number\", \"name\", \"stock\", \"formControlName\", \"stock\", \"pInputText\", \"\"], [\"for\", \"valor\"], [\"id\", \"valor\", \"type\", \"number\", \"name\", \"valor\", \"formControlName\", \"valor\", \"pInputText\", \"\"], [\"pTemplate\", \"footer\"], [\"header\", \"Modificar medicamento\", \"styleClass\", \"p-fluid\", 3, \"responsive\", \"visible\", \"modal\", \"visibleChange\"], [\"header\", \"Realizar venta\", \"styleClass\", \"p-fluid\", 3, \"responsive\", \"visible\", \"modal\", \"visibleChange\"], [3, \"value\", \"valueChange\"], [\"for\", \"cantidad\"], [\"id\", \"cantidad\", \"type\", \"number\", \"name\", \"cantidad\", \"pInputText\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"scope\", \"col\", 4, \"ngFor\", \"ngForOf\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Vender\", 1, \"p-button-primary\", 2, \"margin-right\", \"10px\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Editar\", 1, \"p-button-warning\", 2, \"margin-right\", \"10px\", 3, \"click\"], [\"pButton\", \"\", \"type\", \"button\", \"label\", \"Eliminar\", 1, \"p-button-danger\", 3, \"click\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"thenTemplateName\", \"\"], [\"elseTemplateName\", \"\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Save\", \"icon\", \"pi pi-check\", 1, \"p-button-text\", 3, \"disabled\", \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Save\", \"icon\", \"pi pi-check\", 1, \"p-button-text\", 3, \"click\"]],\n  template: function MedicamentoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelement(1, \"p-toast\")(2, \"br\");\n      i0.ɵɵelementStart(3, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function MedicamentoComponent_Template_button_click_3_listener() {\n        return ctx.showModalMed();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"br\")(5, \"br\");\n      i0.ɵɵelementStart(6, \"p-table\", 1);\n      i0.ɵɵtemplate(7, MedicamentoComponent_ng_template_7_Template, 4, 1, \"ng-template\", 2);\n      i0.ɵɵtemplate(8, MedicamentoComponent_ng_template_8_Template, 6, 1, \"ng-template\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"p-dialog\", 4);\n      i0.ɵɵlistener(\"visibleChange\", function MedicamentoComponent_Template_p_dialog_visibleChange_9_listener($event) {\n        return ctx.modalMed = $event;\n      });\n      i0.ɵɵelementStart(10, \"form\", 5);\n      i0.ɵɵlistener(\"submit\", function MedicamentoComponent_Template_form_submit_10_listener() {\n        return ctx.RegistrarMed();\n      });\n      i0.ɵɵelementStart(11, \"div\")(12, \"label\", 6);\n      i0.ɵɵtext(13, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"br\");\n      i0.ɵɵelementStart(16, \"div\")(17, \"label\", 6);\n      i0.ɵɵtext(18, \"Laboratorio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(19, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"br\");\n      i0.ɵɵelementStart(21, \"div\")(22, \"label\", 6);\n      i0.ɵɵtext(23, \"Fecha de fabricaci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"br\");\n      i0.ɵɵelementStart(26, \"div\")(27, \"label\", 10);\n      i0.ɵɵtext(28, \"Fecha de vencimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(29, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"br\");\n      i0.ɵɵelementStart(31, \"div\")(32, \"label\", 12);\n      i0.ɵɵtext(33, \"Stock\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(34, \"input\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(35, \"br\");\n      i0.ɵɵelementStart(36, \"div\")(37, \"label\", 14);\n      i0.ɵɵtext(38, \"Valor unitario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(39, \"input\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(40, MedicamentoComponent_ng_template_40_Template, 1, 1, \"ng-template\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"p-dialog\", 17);\n      i0.ɵɵlistener(\"visibleChange\", function MedicamentoComponent_Template_p_dialog_visibleChange_41_listener($event) {\n        return ctx.modalMMed = $event;\n      });\n      i0.ɵɵelementStart(42, \"form\", 5);\n      i0.ɵɵlistener(\"submit\", function MedicamentoComponent_Template_form_submit_42_listener() {\n        return ctx.ModificarMed();\n      });\n      i0.ɵɵelementStart(43, \"div\")(44, \"label\", 6);\n      i0.ɵɵtext(45, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(46, \"input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(47, \"br\");\n      i0.ɵɵelementStart(48, \"div\")(49, \"label\", 6);\n      i0.ɵɵtext(50, \"Laboratorio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(51, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(52, \"br\");\n      i0.ɵɵelementStart(53, \"div\")(54, \"label\", 6);\n      i0.ɵɵtext(55, \"Fecha de fabricaci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(56, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(57, \"br\");\n      i0.ɵɵelementStart(58, \"div\")(59, \"label\", 10);\n      i0.ɵɵtext(60, \"Fecha de vencimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(61, \"input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(62, \"br\");\n      i0.ɵɵelementStart(63, \"div\")(64, \"label\", 12);\n      i0.ɵɵtext(65, \"Stock\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(66, \"input\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(67, \"br\");\n      i0.ɵɵelementStart(68, \"div\")(69, \"label\", 14);\n      i0.ɵɵtext(70, \"Valor unitario\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(71, \"input\", 15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(72, MedicamentoComponent_ng_template_72_Template, 1, 1, \"ng-template\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"p-dialog\", 18);\n      i0.ɵɵlistener(\"visibleChange\", function MedicamentoComponent_Template_p_dialog_visibleChange_73_listener($event) {\n        return ctx.modalVenta = $event;\n      });\n      i0.ɵɵelementStart(74, \"p-messages\", 19);\n      i0.ɵɵlistener(\"valueChange\", function MedicamentoComponent_Template_p_messages_valueChange_74_listener($event) {\n        return ctx.msgs = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(75, \"div\")(76, \"label\", 20);\n      i0.ɵɵtext(77, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(78, \"input\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function MedicamentoComponent_Template_input_ngModelChange_78_listener($event) {\n        return ctx.venta.cantidad = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(79, \"p\");\n      i0.ɵɵtext(80);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(81, MedicamentoComponent_ng_template_81_Template, 1, 0, \"ng-template\", 16);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"value\", ctx.medicamentos)(\"columns\", ctx.cols)(\"paginator\", true)(\"rows\", 3);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(24, _c0));\n      i0.ɵɵproperty(\"responsive\", true)(\"visible\", ctx.modalMed)(\"modal\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.frmMedicamento);\n      i0.ɵɵadvance(31);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(25, _c0));\n      i0.ɵɵproperty(\"responsive\", true)(\"visible\", ctx.modalMMed)(\"modal\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.frmMMedicamento);\n      i0.ɵɵadvance(31);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(26, _c0));\n      i0.ɵɵproperty(\"responsive\", true)(\"visible\", ctx.modalVenta)(\"modal\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"value\", ctx.msgs);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.venta.cantidad);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"Total a pagar: \", ctx.precio * ctx.venta.cantidad, \"\");\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.Table, i3.PrimeTemplate, i7.Messages, i8.ButtonDirective, i9.Dialog, i10.InputText, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i4.NgModel, i11.Toast, i5.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAGA,SAAoBA,UAAU,QAAqB,gBAAgB;;;;;;;;;;;;;;;ICMzDC,8BAA4C;IAAAA,YAAc;IAAAA,iBAAK;;;;IAAnBA,eAAc;IAAdA,mCAAc;;;;;IAD5DA,0BAAI;IACFA,kFAA+D;IAC7DA,8BAAgB;IAAAA,wBAAQ;IAAAA,iBAAK;;;;IADXA,eAAU;IAAVA,oCAAU;;;;;IAO1BA,uBAA2I;;;;;IAC5GA,YAAiD;;;;;;IAAjDA,wFAAiD;;;;;IACjDA,YAA4B;;;;;IAA5BA,oDAA4B;;;;;IAH7DA,0BAAiC;IAC/BA,2FAA2I;IAC3IA,0IAA8F;IAC9FA,0IAAyE;IAC3EA,iBAAK;;;;;;IAHIA,eAAgF;IAAhFA,uGAAgF;;;;;;IAF7FA,0BAAI;IACAA,kFAIK;IACLA,0BAAI;IACoEA;MAAA;MAAA;MAAA;MAAA,OAASA,2DAAiC;IAAA,EAAC;IAA6BA,iBAAS;IACvJA,kCAA8I;IAAxEA;MAAA;MAAA;MAAA;MAAA,OAASA,2DAAiC;IAAA,EAAC;IAA6BA,iBAAS;IACvJA,kCAAqH;IAA9CA;MAAA;MAAA;MAAA;MAAA,OAASA,6DAAmC;IAAA,EAAC;IAACA,iBAAS;;;;IAR5GA,eAAU;IAAVA,oCAAU;;;;;;IA+CpCA,kCAA2I;IAAzBA;MAAAA;MAAA;MAAA,OAASA,qCAAc;IAAA,EAAC;IAACA,iBAAS;;;;IAAtEA,wDAAmC;;;;;;IAqCjHA,kCAA4I;IAAzBA;MAAAA;MAAA;MAAA,OAASA,qCAAc;IAAA,EAAC;IAACA,iBAAS;;;;IAAvEA,yDAAoC;;;;;;IAYlHA,kCAAoG;IAAtBA;MAAAA;MAAA;MAAA,OAASA,kCAAW;IAAA,EAAC;IAACA,iBAAS;;;;;;;;ADnGnH,OAAM,MAAOC,oBAAoB;EA6B/BC,YAAoBC,kBAAsC,EAAUC,YAA0B,EAAUC,cAA8B,EAAUC,WAAwB;IAApJ,uBAAkB,GAAlBH,kBAAkB;IAA8B,iBAAY,GAAZC,YAAY;IAAwB,mBAAc,GAAdC,cAAc;IAA0B,gBAAW,GAAXC,WAAW;IA3B3J,iBAAY,GAAkB,EAAE;IAChC,SAAI,GAAU,EAAE;IAChB,SAAI,GAAU,EAAE;IAChB,aAAQ,GAAY,KAAK;IACzB,cAAS,GAAY,KAAK;IAC1B,eAAU,GAAY,KAAK;IAI3B,WAAM,GAAW,CAAC;IAClB,gBAAW,GAAQ;MACjBC,EAAE,EAAE,IAAI;MACRC,MAAM,EAAE,IAAI;MACZC,iBAAiB,EAAE,IAAI;MACvBC,iBAAiB,EAAE,IAAI;MACvBC,KAAK,EAAE,IAAI;MACXC,KAAK,EAAE;KACR;IACD,UAAK,GAAQ;MACXC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAE,IAAI;MACVC,WAAW,EAAE,IAAI;MACjBC,QAAQ,EAAE,IAAI;MACdC,cAAc,EAAE,IAAI;MACpBC,WAAW,EAAE;KACd;EAE0K;EAE3KC,QAAQ;IACN,IAAI,CAACC,eAAe,EAAE;IACtB,IAAI,CAACC,IAAI,GAAG,CACV;MAACC,MAAM,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAI,CAAC,EAC5B;MAACD,MAAM,EAAE,QAAQ;MAAEC,MAAM,EAAE;IAAQ,CAAC,EACpC;MAACD,MAAM,EAAE,aAAa;MAAEC,MAAM,EAAE;IAAa,CAAC,EAC9C;MAACD,MAAM,EAAE,mBAAmB;MAAEC,MAAM,EAAE;IAAsB,CAAC,EAC7D;MAACD,MAAM,EAAE,mBAAmB;MAAEC,MAAM,EAAE;IAAsB,CAAC,EAC7D;MAACD,MAAM,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAU,CAAC,EACrC;MAACD,MAAM,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAgB,CAAC,CAC5C;IACD,IAAI,CAACC,cAAc,GAAG,IAAI,CAAClB,WAAW,CAACmB,KAAK,CAAC;MAC3CjB,MAAM,EAAE,CAAC,EAAE,EAAE,CAACT,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC4B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5DC,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC7B,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC4B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACjElB,iBAAiB,EAAE,CAAC,EAAE,EAAE,CAACV,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MAC9ChB,iBAAiB,EAAE,CAAC,EAAE,EAAE,CAACX,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MAC9Cf,KAAK,EAAE,CAAC,EAAE,EAAE,CAACZ,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC8B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACrDjB,KAAK,EAAE,CAAC,EAAE,EAAE,CAACb,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC8B,GAAG,CAAC,GAAG,CAAC,CAAC;KACvD,CAAC;IACF,IAAI,CAACC,eAAe,GAAG,IAAI,CAACxB,WAAW,CAACmB,KAAK,CAAC;MAC5ClB,EAAE,EAAE,CAAC,EAAE,EAAE,CAACR,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MAC/BlB,MAAM,EAAE,CAAC,EAAE,EAAE,CAACT,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC4B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5DC,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC7B,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC4B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACjElB,iBAAiB,EAAE,CAAC,EAAE,EAAE,CAACV,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MAC9ChB,iBAAiB,EAAE,CAAC,EAAE,EAAE,CAACX,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MAC9Cf,KAAK,EAAE,CAAC,EAAE,EAAE,CAACZ,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC8B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACrDjB,KAAK,EAAE,CAAC,EAAE,EAAE,CAACb,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC8B,GAAG,CAAC,GAAG,CAAC,CAAC;KACvD,CAAC;EACJ;EAEAT,eAAe;IACb,IAAI,CAACjB,kBAAkB,CAACiB,eAAe,EAAE,CAACW,SAAS,CAAGC,MAAM,IAAS;MACnE,IAAIC,IAAI,GAAkB,EAAE;MAC5B,KAAK,MAAMC,OAAO,IAAIF,MAAM,EAAE;QAC5BE,OAAO,CAACzB,iBAAiB,GAAG,IAAI,CAAC0B,QAAQ,CAACD,OAAO,CAACzB,iBAAiB,CAAC;QACpEyB,OAAO,CAACxB,iBAAiB,GAAG,IAAI,CAACyB,QAAQ,CAACD,OAAO,CAACxB,iBAAiB,CAAC;QACpEuB,IAAI,CAACG,IAAI,CAACF,OAAO,CAAC;;MAEpB,IAAI,CAACG,YAAY,GAAGJ,IAAI;IAC1B,CAAC,EACDK,KAAK,IAAG;MACNC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACA;EACH;EAEAG,YAAY;IACV,IAAI,CAACC,QAAQ,GAAG,IAAI;EACtB;EAEAC,YAAY;IACV,IAAIC,IAAI,GAAG;MACTpC,MAAM,EAAE,IAAI,CAACgB,cAAc,CAACqB,QAAQ,CAAC,QAAQ,CAAC,CAACC,KAAK;MACpDlB,WAAW,EAAE,IAAI,CAACJ,cAAc,CAACqB,QAAQ,CAAC,aAAa,CAAC,CAACC,KAAK;MAC9DrC,iBAAiB,EAAE,IAAIsC,IAAI,CAAC,GAAG,IAAI,CAACvB,cAAc,CAACqB,QAAQ,CAAC,mBAAmB,CAAC,CAACC,KAAK,WAAW,CAAC;MAClGpC,iBAAiB,EAAE,IAAIqC,IAAI,CAAC,GAAG,IAAI,CAACvB,cAAc,CAACqB,QAAQ,CAAC,mBAAmB,CAAC,CAACC,KAAK,WAAW,CAAC;MAClGnC,KAAK,EAAE,IAAI,CAACa,cAAc,CAACqB,QAAQ,CAAC,OAAO,CAAC,CAACC,KAAK;MAClDlC,KAAK,EAAE,IAAI,CAACY,cAAc,CAACqB,QAAQ,CAAC,OAAO,CAAC,CAACC;KAC9C;IACD,IAAI,CAAC3C,kBAAkB,CAAC6C,IAAI,CAACJ,IAAI,CAAC,CAACb,SAAS,CAACkB,GAAG,IAAG;MACjD,IAAGA,GAAG,EAAC;QACL,IAAI,CAACP,QAAQ,GAAG,KAAK;QACrB,IAAI,CAAClB,cAAc,CAAC0B,KAAK,EAAE;QAC3B,IAAI,CAAC9B,eAAe,EAAE;;IAE1B,CAAC,CAAC;EACJ;EAEA+B,iBAAiB,CAACC,KAAa;IAC7B,IAAIC,GAAG,GAAQ,IAAI,CAAChB,YAAY,CAACiB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAChD,EAAE,IAAI6C,KAAK,CAAC;IAC7D,IAAI,CAACtB,eAAe,GAAG,IAAI,CAACxB,WAAW,CAACmB,KAAK,CAAC;MAC5ClB,EAAE,EAAE,CAAC8C,GAAG,CAAC9C,EAAE,EAAE,CAACR,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MACnClB,MAAM,EAAE,CAAC6C,GAAG,CAAC7C,MAAM,EAAE,CAACT,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC4B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACpEC,WAAW,EAAE,CAACyB,GAAG,CAACzB,WAAW,EAAE,CAAC7B,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC4B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9ElB,iBAAiB,EAAE,CAAC4C,GAAG,CAAC5C,iBAAiB,EAAE,CAACV,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MACjEhB,iBAAiB,EAAE,CAAC2C,GAAG,CAAC3C,iBAAiB,EAAE,CAACX,UAAU,CAAC2B,QAAQ,CAAC,CAAC;MACjEf,KAAK,EAAE,CAAC0C,GAAG,CAAC1C,KAAK,EAAE,CAACZ,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC8B,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5DjB,KAAK,EAAE,CAACyC,GAAG,CAACzC,KAAK,EAAE,CAACb,UAAU,CAAC2B,QAAQ,EAAE3B,UAAU,CAAC8B,GAAG,CAAC,GAAG,CAAC,CAAC;KAC9D,CAAC;IACFU,OAAO,CAACC,GAAG,CAACa,GAAG,CAAC;IAChB,IAAI,CAACG,SAAS,GAAG,IAAI;EACvB;EAEAC,iBAAiB,CAACL,KAAa;IAC7B,IAAI,CAACM,QAAQ,GAAG,IAAI,CAACrB,YAAY,CAACiB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAChD,EAAE,IAAI6C,KAAK,CAAC;IAC9D,IAAI,CAACO,MAAM,GAAG,IAAI,CAACD,QAAQ,CAAC9C,KAAK;IACjC,IAAI,CAACgD,UAAU,GAAG,IAAI;EACxB;EAEAC,YAAY;IACV,IAAIjB,IAAI,GAAG;MACTrC,EAAE,EAAE,IAAI,CAACuB,eAAe,CAACe,QAAQ,CAAC,IAAI,CAAC,CAACC,KAAK;MAC7CtC,MAAM,EAAE,IAAI,CAACsB,eAAe,CAACe,QAAQ,CAAC,QAAQ,CAAC,CAACC,KAAK;MACrDlB,WAAW,EAAE,IAAI,CAACE,eAAe,CAACe,QAAQ,CAAC,aAAa,CAAC,CAACC,KAAK;MAC/DrC,iBAAiB,EAAE,IAAIsC,IAAI,CAAC,GAAG,IAAI,CAACjB,eAAe,CAACe,QAAQ,CAAC,mBAAmB,CAAC,CAACC,KAAK,WAAW,CAAC;MACnGpC,iBAAiB,EAAE,IAAIqC,IAAI,CAAC,GAAG,IAAI,CAACjB,eAAe,CAACe,QAAQ,CAAC,mBAAmB,CAAC,CAACC,KAAK,WAAW,CAAC;MACnGnC,KAAK,EAAE,IAAI,CAACmB,eAAe,CAACe,QAAQ,CAAC,OAAO,CAAC,CAACC,KAAK;MACnDlC,KAAK,EAAE,IAAI,CAACkB,eAAe,CAACe,QAAQ,CAAC,OAAO,CAAC,CAACC;KAC/C;IACD,IAAI,CAAC3C,kBAAkB,CAAC2D,MAAM,CAAClB,IAAI,CAAC,CAACb,SAAS,CAACkB,GAAG,IAAG;MACnDV,OAAO,CAACC,GAAG,CAACS,GAAG,CAAC;MAChB,IAAGA,GAAG,EAAC;QACL,IAAI,CAACO,SAAS,GAAG,KAAK;QACtB,IAAI,CAACpC,eAAe,EAAE;;IAE1B,CAAC,CAAC;EACJ;EAEA2C,mBAAmB,CAACX,KAAa;IAC/Bb,OAAO,CAACC,GAAG,CAACY,KAAK,CAAC;IAClB,IAAI,CAACjD,kBAAkB,CAAC6D,MAAM,CAACZ,KAAK,CAAC,CAACrB,SAAS,CAACkB,GAAG,IAAG;MACpD,IAAI,CAAC7B,eAAe,EAAE;IACxB,CAAC,CAAC;EACJ;EAEA6C,SAAS;IACP,IAAG,IAAI,CAACC,KAAK,CAAClD,QAAQ,IAAE,IAAI,CAAC0C,QAAQ,CAAC/C,KAAK,IAAI,IAAI,CAACuD,KAAK,CAAClD,QAAQ,GAAC,CAAC,EAAC;MACnE,IAAI,CAAC0C,QAAQ,CAAC/C,KAAK,IAAI,IAAI,CAACuD,KAAK,CAAClD,QAAQ;MAC1C,IAAI,CAAC0C,QAAQ,CAACjD,iBAAiB,GAAG,IAAIsC,IAAI,CAAC,GAAG,IAAI,CAACW,QAAQ,CAACjD,iBAAiB,WAAW,CAAC;MACzF,IAAI,CAACiD,QAAQ,CAAChD,iBAAiB,GAAG,IAAIqC,IAAI,CAAC,GAAG,IAAI,CAACW,QAAQ,CAAChD,iBAAiB,WAAW,CAAC;MACzF,IAAI,CAACP,kBAAkB,CAAC2D,MAAM,CAAC,IAAI,CAACJ,QAAQ,CAAC,CAAC3B,SAAS,CAACkB,GAAG,IAAG;QAC5D,IAAGA,GAAG,EAAC;UACL,IAAI,CAAC7B,eAAe,EAAE;;MAE1B,CAAC,CAAC;MACF,IAAIP,KAAK,GAAG,IAAIkC,IAAI,EAAE;MACtB,IAAI,CAACmB,KAAK,CAACrD,KAAK,GAAGA,KAAK;MACxB,IAAI,CAACqD,KAAK,CAACpD,IAAI,GAAGD,KAAK,CAACsD,QAAQ,EAAE,GAAC,GAAG,IAAEtD,KAAK,CAACuD,UAAU,EAAE,CAACC,QAAQ,EAAE,CAACC,MAAM,IAAE,CAAC,GAAG,IAAIzD,KAAK,CAACuD,UAAU,EAAE,EAAE,GAAGvD,KAAK,CAACuD,UAAU,EAAE,CAAC;MAChI,IAAI,CAACF,KAAK,CAACnD,WAAW,GAAG,IAAI,CAAC2C,QAAQ,CAAClD,MAAM;MAC7C,IAAI,CAAC0D,KAAK,CAACjD,cAAc,GAAG,IAAI,CAACyC,QAAQ,CAAC9C,KAAK;MAC/C,IAAI,CAACsD,KAAK,CAAChD,WAAW,GAAG,IAAI,CAACwC,QAAQ,CAAC9C,KAAK,GAAG,IAAI,CAACsD,KAAK,CAAClD,QAAQ;MAClE,IAAI,CAACZ,YAAY,CAAC4C,IAAI,CAAC,IAAI,CAACkB,KAAK,CAAC,CAACnC,SAAS,CAACkB,GAAG,IAAG;QACjD,IAAGA,GAAG,EAAC;UACL,IAAI,CAACiB,KAAK,CAAClD,QAAQ,GAAG,CAAC;UACvB,IAAI,CAAC4C,UAAU,GAAG,KAAK;UACvB,IAAI,CAACvD,cAAc,CAACkE,GAAG,CAAC;YAACC,QAAQ,EAAC,SAAS;YAAEC,OAAO,EAAC,QAAQ;YAAEC,MAAM,EAAC;UAA0B,CAAC,CAAC;;MAEtG,CAAC,CAAC;KACH,MAAI;MACH,IAAG,IAAI,CAACR,KAAK,CAAClD,QAAQ,GAAC,CAAC,EAAC;QACvB,IAAI,CAAC2D,IAAI,GAAG,CAAC;UAACH,QAAQ,EAAC,MAAM;UAAEC,OAAO,EAAC,MAAM;UAAEC,MAAM,EAAC;QAAmB,CAAC,CAAC;OAC5E,MAAI;QACH,IAAI,CAACC,IAAI,GAAG,CAAC;UAACH,QAAQ,EAAC,OAAO;UAAEC,OAAO,EAAC,OAAO;UAAEC,MAAM,EAAC;QAAoB,CAAC,CAAC;;;EAKpF;EAEAvC,QAAQ,CAACyC,IAAS;IAChB,IAAI/D,KAAK,GAAG,IAAIkC,IAAI,CAAC6B,IAAI,CAAC;MACtBC,KAAK,GAAG,EAAE,IAAIhE,KAAK,CAACiE,QAAQ,EAAE,GAAG,CAAC,CAAC;MACnCC,GAAG,GAAG,EAAE,GAAGlE,KAAK,CAACmE,OAAO,EAAE;MAC1BC,IAAI,GAAGpE,KAAK,CAACqE,WAAW,EAAE;IAC9B,IAAIL,KAAK,CAACP,MAAM,GAAG,CAAC,EAChBO,KAAK,GAAG,GAAG,GAAGA,KAAK;IACvB,IAAIE,GAAG,CAACT,MAAM,GAAG,CAAC,EACdS,GAAG,GAAG,GAAG,GAAGA,GAAG;IACnB,OAAO,CAACE,IAAI,EAAEJ,KAAK,EAAEE,GAAG,CAAC,CAACI,IAAI,CAAC,GAAG,CAAC;EACrC;;AA9LWlF,oBAAoB;mBAApBA,oBAAoB;AAAA;AAApBA,oBAAoB;QAApBA,oBAAoB;EAAAmF;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZjCxF,2BAAK;MACHA,0BAAmB;MAEnBA,iCAAwG;MAAzBA;QAAA,OAASyF,kBAAc;MAAA,EAAC;MAACzF,iBAAS;MACjHA,qBAAI;MAEJA,kCAAgF;MAC9EA,qFAKc;MACdA,qFAac;MAChBA,iBAAU;MAEVA,mCAA6I;MAA3DA;QAAA;MAAA,EAAsB;MACtGA,gCAAqF;MAA1BA;QAAA,OAAUyF,kBAAc;MAAA,EAAC;MAClFzF,4BAAK;MACsBA,uBAAM;MAAAA,iBAAQ;MACvCA,4BAAiF;MACnFA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACsBA,4BAAW;MAAAA,iBAAQ;MAC5CA,4BAAgG;MAClGA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACsBA,0CAAoB;MAAAA,iBAAQ;MACrDA,4BAAkH;MACpHA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MAC4BA,qCAAoB;MAAAA,iBAAQ;MAC3DA,6BAAkH;MACpHA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACgBA,sBAAK;MAAAA,iBAAQ;MAChCA,6BAAgF;MAClFA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACgBA,+BAAc;MAAAA,iBAAQ;MACzCA,6BAAgF;MAClFA,iBAAM;MAERA,wFAEc;MAChBA,iBAAW;MAEXA,qCAAoJ;MAA5DA;QAAA;MAAA,EAAuB;MAC7GA,gCAAsF;MAA1BA;QAAA,OAAUyF,kBAAc;MAAA,EAAC;MACnFzF,4BAAK;MACsBA,uBAAM;MAAAA,iBAAQ;MACvCA,4BAAiF;MACnFA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACsBA,4BAAW;MAAAA,iBAAQ;MAC5CA,4BAAgG;MAClGA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACsBA,0CAAoB;MAAAA,iBAAQ;MACrDA,4BAAkH;MACpHA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MAC4BA,qCAAoB;MAAAA,iBAAQ;MAC3DA,6BAAkH;MACpHA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACgBA,sBAAK;MAAAA,iBAAQ;MAChCA,6BAAgF;MAClFA,iBAAM;MACNA,sBAAI;MACJA,4BAAK;MACgBA,+BAAc;MAAAA,iBAAQ;MACzCA,6BAAgF;MAClFA,iBAAM;MAERA,wFAEc;MAChBA,iBAAW;MAEXA,qCAA8I;MAA7DA;QAAA;MAAA,EAAwB;MACvGA,uCAA6B;MAAjBA;QAAA;MAAA,EAAgB;MAACA,iBAAa;MAC1CA,4BAAK;MACmBA,yBAAQ;MAAAA,iBAAQ;MACtCA,kCAA2F;MAAxCA;QAAA;MAAA,EAA4B;MAA/EA,iBAA2F;MAE7FA,0BAAG;MAAAA,aAA0C;MAAAA,iBAAI;MACjDA,wFAEc;MAChBA,iBAAW;;;MA3GFA,eAAsB;MAAtBA,wCAAsB;MAuBwBA,eAA0B;MAA1BA,0CAA0B;MAA9CA,iCAAmB;MAC9CA,eAA4B;MAA5BA,8CAA4B;MAoCyBA,gBAA0B;MAA1BA,0CAA0B;MAA9CA,iCAAmB;MACpDA,eAA6B;MAA7BA,+CAA6B;MAoCiBA,gBAA0B;MAA1BA,0CAA0B;MAA9CA,iCAAmB;MACvCA,eAAgB;MAAhBA,gCAAgB;MAGyBA,eAA4B;MAA5BA,4CAA4B;MAE9EA,eAA0C;MAA1CA,6EAA0C","names":["Validators","i0","MedicamentoComponent","constructor","medicamentoService","ventaService","messageService","formBuilder","id","nombre","fecha_fabricacion","fecha_vencimiento","stock","valor","fecha","hora","medicamento","cantidad","valor_unitario","valor_total","ngOnInit","getMedicamentos","cols","fields","header","frmMedicamento","group","required","minLength","laboratorio","min","frmMMedicamento","subscribe","result","meds","element","formDate","push","medicamentos","error","console","log","showModalMed","modalMed","RegistrarMed","form","controls","value","Date","save","res","reset","editarMedicamento","medId","med","find","ele","modalMMed","venderMedicamento","medVenta","precio","modalVenta","ModificarMed","update","eliminarMedicamento","delete","VenderMed","venta","getHours","getMinutes","toString","length","add","severity","summary","detail","msgs","date","month","getMonth","day","getDate","year","getFullYear","join","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Schied\\Desktop\\MS\\drogueria-app\\src\\app\\components\\medicamento\\medicamento.component.ts","C:\\Users\\Schied\\Desktop\\MS\\drogueria-app\\src\\app\\components\\medicamento\\medicamento.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Medicamento } from 'src/app/models/medicamento';\nimport { MedicamentoService } from 'src/app/services/medicamento.service';\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\nimport { VentaService } from 'src/app/services/venta.service';\nimport {MessageService} from 'primeng/api';\n\n@Component({\n  selector: 'app-medicamento',\n  templateUrl: './medicamento.component.html',\n  styleUrls: ['./medicamento.component.css']\n})\nexport class MedicamentoComponent implements OnInit{\n\n  medicamentos: Medicamento[] = [];\n  cols: any[] = [];\n  msgs: any[] = [];\n  modalMed: boolean = false;\n  modalMMed: boolean = false;\n  modalVenta: boolean = false;\n  frmMedicamento: any;\n  frmMMedicamento: any;\n  medVenta: any;\n  precio: number = 0;\n  medicamento: any = {\n    id: null,\n    nombre: null,\n    fecha_fabricacion: null,\n    fecha_vencimiento: null,\n    stock: null,\n    valor: null\n  }\n  venta: any = {\n    fecha: null,\n    hora: null,\n    medicamento: null,\n    cantidad: null,\n    valor_unitario: null,\n    valor_total: null\n  };\n\n  constructor(private medicamentoService: MedicamentoService, private ventaService: VentaService, private messageService: MessageService, private formBuilder: FormBuilder) {}\n\n  ngOnInit(): void {\n    this.getMedicamentos();\n    this.cols = [\n      {fields: \"id\", header: \"Id\"},\n      {fields: \"nombre\", header: \"Nombre\"},\n      {fields: \"laboratorio\", header: \"Laboratorio\"},\n      {fields: \"fecha_fabricacion\", header: \"Fecha de fabricacion\"},\n      {fields: \"fecha_vencimiento\", header: \"Fecha de vencimiento\"},\n      {fields: \"stock\", header: \"Cantidad\"},\n      {fields: \"valor\", header: \"Valor Unitario\"},\n    ]\n    this.frmMedicamento = this.formBuilder.group({\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      laboratorio: ['', [Validators.required, Validators.minLength(3)]],\n      fecha_fabricacion: ['', [Validators.required]],\n      fecha_vencimiento: ['', [Validators.required]],\n      stock: ['', [Validators.required, Validators.min(1)]],\n      valor: ['', [Validators.required, Validators.min(100)]],\n    });\n    this.frmMMedicamento = this.formBuilder.group({\n      id: ['', [Validators.required]],\n      nombre: ['', [Validators.required, Validators.minLength(3)]],\n      laboratorio: ['', [Validators.required, Validators.minLength(3)]],\n      fecha_fabricacion: ['', [Validators.required]],\n      fecha_vencimiento: ['', [Validators.required]],\n      stock: ['', [Validators.required, Validators.min(1)]],\n      valor: ['', [Validators.required, Validators.min(100)]],\n    });\n  }\n\n  getMedicamentos(){\n    this.medicamentoService.getMedicamentos().subscribe( (result): any =>{\n      let meds: Medicamento[] = [];\n      for (const element of result) {\n        element.fecha_fabricacion = this.formDate(element.fecha_fabricacion);\n        element.fecha_vencimiento = this.formDate(element.fecha_vencimiento);\n        meds.push(element);\n      }\n      this.medicamentos = meds;\n    },\n    error => {\n      console.log(error);\n    }\n    );\n  }\n\n  showModalMed(): void{\n    this.modalMed = true;\n  }\n\n  RegistrarMed(): void{\n    let form = {\n      nombre: this.frmMedicamento.controls['nombre'].value,\n      laboratorio: this.frmMedicamento.controls['laboratorio'].value,\n      fecha_fabricacion: new Date(`${this.frmMedicamento.controls['fecha_fabricacion'].value}T00:00:00`),\n      fecha_vencimiento: new Date(`${this.frmMedicamento.controls['fecha_vencimiento'].value}T00:00:00`),\n      stock: this.frmMedicamento.controls['stock'].value,\n      valor: this.frmMedicamento.controls['valor'].value\n    }\n    this.medicamentoService.save(form).subscribe(res => {\n      if(res){\n        this.modalMed = false;\n        this.frmMedicamento.reset();\n        this.getMedicamentos();\n      }\n    })\n  }\n\n  editarMedicamento(medId: number): void{\n    let med: any = this.medicamentos.find(ele => ele.id == medId);\n    this.frmMMedicamento = this.formBuilder.group({\n      id: [med.id, [Validators.required]],\n      nombre: [med.nombre, [Validators.required, Validators.minLength(3)]],\n      laboratorio: [med.laboratorio, [Validators.required, Validators.minLength(3)]],\n      fecha_fabricacion: [med.fecha_fabricacion, [Validators.required]],\n      fecha_vencimiento: [med.fecha_vencimiento, [Validators.required]],\n      stock: [med.stock, [Validators.required, Validators.min(1)]],\n      valor: [med.valor, [Validators.required, Validators.min(100)]],\n    });\n    console.log(med);\n    this.modalMMed = true;\n  }\n\n  venderMedicamento(medId: number): void{\n    this.medVenta = this.medicamentos.find(ele => ele.id == medId);\n    this.precio = this.medVenta.valor;\n    this.modalVenta = true;\n  }\n\n  ModificarMed(): void{\n    let form = {\n      id: this.frmMMedicamento.controls['id'].value,\n      nombre: this.frmMMedicamento.controls['nombre'].value,\n      laboratorio: this.frmMMedicamento.controls['laboratorio'].value,\n      fecha_fabricacion: new Date(`${this.frmMMedicamento.controls['fecha_fabricacion'].value}T00:00:00`),\n      fecha_vencimiento: new Date(`${this.frmMMedicamento.controls['fecha_vencimiento'].value}T00:00:00`),\n      stock: this.frmMMedicamento.controls['stock'].value,\n      valor: this.frmMMedicamento.controls['valor'].value\n    }\n    this.medicamentoService.update(form).subscribe(res => {\n      console.log(res);\n      if(res){\n        this.modalMMed = false;\n        this.getMedicamentos();\n      }\n    })\n  }\n\n  eliminarMedicamento(medId: number){\n    console.log(medId);\n    this.medicamentoService.delete(medId).subscribe(res => {\n      this.getMedicamentos();\n    })\n  }\n\n  VenderMed(): void{\n    if(this.venta.cantidad<=this.medVenta.stock && this.venta.cantidad>0){\n      this.medVenta.stock -= this.venta.cantidad;\n      this.medVenta.fecha_fabricacion = new Date(`${this.medVenta.fecha_fabricacion}T00:00:00`);\n      this.medVenta.fecha_vencimiento = new Date(`${this.medVenta.fecha_vencimiento}T00:00:00`);\n      this.medicamentoService.update(this.medVenta).subscribe(res => {\n        if(res){\n          this.getMedicamentos();\n        }\n      });\n      let fecha = new Date();\n      this.venta.fecha = fecha;\n      this.venta.hora = fecha.getHours()+\":\"+(fecha.getMinutes().toString().length==1 ? `0${fecha.getMinutes()}` : fecha.getMinutes());\n      this.venta.medicamento = this.medVenta.nombre;\n      this.venta.valor_unitario = this.medVenta.valor;\n      this.venta.valor_total = this.medVenta.valor * this.venta.cantidad;\n      this.ventaService.save(this.venta).subscribe(res => {\n        if(res){\n          this.venta.cantidad = 0;\n          this.modalVenta = false;\n          this.messageService.add({severity:'success', summary:'Exito!', detail:'Se ha realizado la venta'});\n        }\n      })\n    }else{\n      if(this.venta.cantidad<1){\n        this.msgs = [{severity:'info', summary:'Info', detail:'Cantidad invalida'}];\n      }else{\n        this.msgs = [{severity:'error', summary:'Error', detail:'Stock insuficiente'}];\n      }\n\n    }\n\n  }\n\n  formDate(date: any) {\n    let fecha = new Date(date),\n        month = '' + (fecha.getMonth() + 1),\n        day = '' + fecha.getDate(),\n        year = fecha.getFullYear();\n    if (month.length < 2)\n        month = '0' + month;\n    if (day.length < 2)\n        day = '0' + day;\n    return [year, month, day].join('-');\n  }\n}\n","<div>\n  <p-toast></p-toast>\n  <br>\n  <button pButton type=\"button\" label=\"Registrar nuevo\" class=\"p-button-primary\" (click)=\"showModalMed()\"></button>\n  <br>\n  <br>\n  <p-table [value]=\"medicamentos\" [columns]=\"cols\" [paginator]=\"true\" [rows]=\"3\" >\n    <ng-template pTemplate=\"header\" let-columns>\n        <tr>\n          <th *ngFor=\"let col of columns\" scope=\"col\">{{col.header}}</th>\n            <th scope=\"col\">Opciones</th>\n        </tr>\n    </ng-template>\n    <ng-template pTemplate=\"body\" let-medicamento let-columns=\"columns\">\n        <tr>\n            <td *ngFor=\"let col of columns\" >\n              <span *ngIf=\"col.fields === 'fecha_fabricacion' || col.fields === 'fecha_vencimiento'; then thenTemplateName else elseTemplateName\"></span>\n              <ng-template #thenTemplateName>{{ medicamento[col.fields] | date: 'dd/MM/yyyy'}}</ng-template>\n              <ng-template #elseTemplateName>{{ medicamento[col.fields]}}</ng-template>\n            </td>\n            <td>\n              <button pButton type=\"button\" label=\"Vender\" class=\"p-button-primary\" (click)=\"venderMedicamento(medicamento.id)\" style=\"margin-right: 10px;\"></button>\n              <button pButton type=\"button\" label=\"Editar\" class=\"p-button-warning\" (click)=\"editarMedicamento(medicamento.id)\" style=\"margin-right: 10px;\"></button>\n              <button pButton type=\"button\" label=\"Eliminar\" class=\"p-button-danger\" (click)=\"eliminarMedicamento(medicamento.id)\"></button>\n            </td>\n        </tr>\n    </ng-template>\n  </p-table>\n  <!--MODAL REGISTRO-->\n  <p-dialog header=\"Registrar nuevo\" [responsive]=\"true\" [style]=\"{width: '550px'}\" [(visible)]=\"modalMed\" [modal]=\"true\" styleClass=\"p-fluid\">\n    <form [formGroup]=\"frmMedicamento\" class=\"login-container\" (submit)=\"RegistrarMed()\">\n      <div>\n        <label for=\"float-input\">Nombre</label>\n        <input id=\"nombre\" type=\"text\" name=\"nombre\" formControlName=\"nombre\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"float-input\">Laboratorio</label>\n        <input id=\"laboratorio\" type=\"text\" name=\"laboratorio\" formControlName=\"laboratorio\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"float-input\">Fecha de fabricación</label>\n        <input id=\"fecha_fabricacion\" type=\"date\" name=\"fecha_fabricacion\" formControlName=\"fecha_fabricacion\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"fecha_vencimiento\">Fecha de vencimiento</label>\n        <input id=\"fecha_vencimiento\" type=\"date\" name=\"fecha_vencimiento\" formControlName=\"fecha_vencimiento\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"stock\">Stock</label>\n        <input id=\"stock\" type=\"number\" name=\"stock\" formControlName=\"stock\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"valor\">Valor unitario</label>\n        <input id=\"valor\" type=\"number\" name=\"valor\" formControlName=\"valor\" pInputText>\n      </div>\n    </form>\n    <ng-template pTemplate=\"footer\">\n      <button pButton pRipple label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" [disabled]=\"frmMedicamento.invalid\" (click)=\"RegistrarMed()\"></button>\n    </ng-template>\n  </p-dialog>\n  <!--MODAL MODIFICAR-->\n  <p-dialog header=\"Modificar medicamento\" [responsive]=\"true\" [style]=\"{width: '550px'}\" [(visible)]=\"modalMMed\" [modal]=\"true\" styleClass=\"p-fluid\">\n    <form [formGroup]=\"frmMMedicamento\" class=\"login-container\" (submit)=\"ModificarMed()\">\n      <div>\n        <label for=\"float-input\">Nombre</label>\n        <input id=\"nombre\" type=\"text\" name=\"nombre\" formControlName=\"nombre\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"float-input\">Laboratorio</label>\n        <input id=\"laboratorio\" type=\"text\" name=\"laboratorio\" formControlName=\"laboratorio\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"float-input\">Fecha de fabricación</label>\n        <input id=\"fecha_fabricacion\" type=\"date\" name=\"fecha_fabricacion\" formControlName=\"fecha_fabricacion\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"fecha_vencimiento\">Fecha de vencimiento</label>\n        <input id=\"fecha_vencimiento\" type=\"date\" name=\"fecha_vencimiento\" formControlName=\"fecha_vencimiento\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"stock\">Stock</label>\n        <input id=\"stock\" type=\"number\" name=\"stock\" formControlName=\"stock\" pInputText>\n      </div>\n      <br>\n      <div>\n        <label for=\"valor\">Valor unitario</label>\n        <input id=\"valor\" type=\"number\" name=\"valor\" formControlName=\"valor\" pInputText>\n      </div>\n    </form>\n    <ng-template pTemplate=\"footer\">\n      <button pButton pRipple label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" [disabled]=\"frmMMedicamento.invalid\" (click)=\"ModificarMed()\"></button>\n    </ng-template>\n  </p-dialog>\n  <!--MODAL VENTA-->\n  <p-dialog header=\"Realizar venta\" [responsive]=\"true\" [style]=\"{width: '550px'}\" [(visible)]=\"modalVenta\" [modal]=\"true\" styleClass=\"p-fluid\">\n    <p-messages [(value)]=\"msgs\"></p-messages>\n    <div>\n      <label for=\"cantidad\">Cantidad</label>\n      <input id=\"cantidad\" type=\"number\" name=\"cantidad\" [(ngModel)]=\"venta.cantidad\" pInputText>\n    </div>\n    <p>Total a pagar: {{precio * venta.cantidad}}</p>\n    <ng-template pTemplate=\"footer\">\n      <button pButton pRipple label=\"Save\" icon=\"pi pi-check\" class=\"p-button-text\" (click)=\"VenderMed()\"></button>\n    </ng-template>\n  </p-dialog>\n\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}